(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{43:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t.n(c),a=t(17),u=t.n(a),s=t(18),i=t(5),o=t.n(i),d=t(8),j=t(4),b=t(3),l=t.n(b),f="/api/persons",h=function(){return l.a.get(f).then((function(e){return e.data}))},m=function(e){return l.a.post(f,e).then((function(e){return e.data}))},p=function(e){if(window.confirm("Delete ".concat(e.name)))return l.a.delete("".concat(f,"/").concat(e.id)).then((function(e){return e.data}))},O=function(e,n){return l.a.put("".concat(f,"/").concat(e),n)},v=t(0),x=function(e){var n=e.phonebook,t=e.delFunc;return n.map((function(e){return Object(v.jsx)(g,{delFunc:t,person:e},e.id)}))},g=function(e){var n=e.person,t=e.delFunc;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("p",{children:[n.name," ",n.number]}),Object(v.jsx)("button",{onClick:function(){t(n)},children:"delete"})]})},k=function(e){var n=e.filter,t=e.func;return Object(v.jsxs)("div",{children:["filter shown with ",Object(v.jsx)("input",{value:n,onChange:t})]})},w=function(e){var n=e.name,t=e.numb,c=e.nameFunc,r=e.numFunc,a=e.addName;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h2",{children:"Add a new"}),Object(v.jsxs)("form",{children:[Object(v.jsxs)("div",{children:["name: ",Object(v.jsx)("input",{value:n,onChange:c})]}),Object(v.jsxs)("div",{children:["number: ",Object(v.jsx)("input",{value:t,onChange:r})]}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:a,type:"submit",children:"add"})})]})]})},F=function(e){var n=e.message;return""===n?null:"success"===n?Object(v.jsx)("div",{className:"success",children:"The user was successfully added/updated dawg!"}):"error"===n?Object(v.jsx)("div",{className:"error",children:"The user was already deleted dawg dawg!"}):"validation"===n?Object(v.jsx)("div",{className:"error",children:"The name must be at least 3 characters and the number must be at least 8 digits!"}):void 0},y=function(){var e=Object(c.useState)([]),n=Object(j.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),u=Object(j.a)(a,2),i=u[0],b=u[1],l=Object(c.useState)(""),f=Object(j.a)(l,2),g=f[0],y=f[1],N=Object(c.useState)(""),S=Object(j.a)(N,2),C=S[0],T=S[1],D=Object(c.useState)(""),E=Object(j.a)(D,2),J=E[0],A=E[1];Object(c.useEffect)((function(){h().then((function(e){r(e)}))}),[]);var B=function(){var e=Object(d.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(n);case 2:h().then((function(e){r(e)}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),I=function(){var e=Object(d.a)(o.a.mark((function e(n){var c,a,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),c=Object(s.a)(t),e.prev=2,c.s();case 4:if((a=c.n()).done){e.next=23;break}if((u=a.value).name!==i){e.next=21;break}return e.prev=7,e.next=10,o=u.id,O(o,{name:i,id:o,number:g});case 10:A("success"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),e.t0.response.data.error.includes("Validation")?A("validation"):A("error");case 16:return setTimeout((function(){A("")}),5e3),b(""),y(""),h().then((function(e){r(e)})),e.abrupt("return");case 21:e.next=4;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(2),c.e(e.t1);case 28:return e.prev=28,c.f(),e.finish(28);case 31:m({name:i,number:g}).then((function(e){r(t.concat(e)),A("success"),setTimeout((function(){A("")}),5e3),b(""),y("")})).catch((function(e){console.log(e.response.data),A("validation")}));case 33:case"end":return e.stop()}var o}),e,null,[[2,25,28,31],[7,13]])})));return function(n){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:"Phonebook"}),Object(v.jsx)(F,{message:J}),Object(v.jsx)(k,{filter:C,func:function(e){T(e.target.value)}}),Object(v.jsx)(w,{name:i,numb:g,nameFunc:function(e){b(e.target.value)},numFunc:function(e){y(e.target.value)},addName:I}),Object(v.jsx)("h2",{children:"Numbers"}),Object(v.jsx)(x,{delFunc:B,phonebook:t.filter((function(e){return e.name.includes(C)}))})]})};t(43);u.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(y,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.77c05370.chunk.js.map